(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00d54b58"],{"1cc3":function(e,r,t){},3266:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("Layout",{attrs:{title:e.$t("login_title")}},[t("v-form",{ref:"form",staticStyle:{width:"100%"},on:{submit:function(r){return r.preventDefault(),e.login(r)}},model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[t("v-card-text",[e.msg||e.resentVerification?t("v-alert",{attrs:{type:"success",text:"",prominent:"",dense:"",color:"green"}},[e._v(" "+e._s(e.resentVerification?e.$t("email_verification_resent"):e.$t(e.msg))+" ")]):e._e(),e._l(e.errors,(function(r){return t("v-alert",{key:r.name,attrs:{type:"error",text:"",prominent:"",dense:"",color:"red"}},[e._v(" "+e._s(r.errorMessage)+" "),r.verifyLink&&!e.resentVerification?t("a",{staticClass:"red--text alert-link",on:{click:e.resendEmailVerification}},[e._v(e._s(e.$t("email_new_verification")))]):e._e()])})),t("v-text-field",{class:e.fieldErrors.email?"error--text":"",attrs:{label:""+e.$t("email"),type:"email",rules:[function(r){return!!r||e.signinRules.email_required}],autocomplete:"on"},model:{value:e.credentials.email,callback:function(r){e.$set(e.credentials,"email",r)},expression:"credentials.email"}}),t("v-text-field",{class:e.fieldErrors.password?"error--text":"",attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",type:e.show?"text":"password",label:""+e.$t("password"),rules:[function(r){return!!r||e.signinRules.password_required}],autocomplete:"off"},on:{"click:append":function(r){e.show=!e.show}},model:{value:e.credentials.password,callback:function(r){e.$set(e.credentials,"password",r)},expression:"credentials.password"}}),t("router-link",{attrs:{to:{name:"password-forgot",query:{email:e.credentials.email}}}},[e._v(" "+e._s(e.$t("forgot_password"))+" ")]),t("v-spacer"),t("router-link",{attrs:{to:{name:"sign-up"}}},[e._v(" "+e._s(e.$t("create_login_question"))+" ")])],2),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:"",type:"submit"}},[e._v(e._s(e.$t("login")))])],1)],1)],1)},i=[],a=(t("c975"),t("96cf"),t("1da1")),n=t("3a75"),o=t("215b"),l=t("4d05"),c={components:{Layout:l["a"]},props:{email:{type:String,default:""},msg:{type:String,default:null}},data:function(){return{credentials:{email:this.email||"",password:""},errors:[],show:!1,valid:!1,fieldErrors:{email:!1,password:!1},resentVerification:!1}},computed:{signinRules:function(){return{email_required:this.$i18n.t("email_is_required"),password_required:this.$i18n.t("password_is_required")}}},created:function(){localStorage.beepLocale?this.$i18n.locale=localStorage.beepLocale:this.$i18n.locale=o["a"].checkBrowserLanguage()},methods:{resendEmailVerification:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var t,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n["a"].postRequest("/email/resend",e.credentials);case 3:return t=r.sent,e.resentVerification=!0,r.abrupt("return",t);case 8:r.prev=8,r.t0=r["catch"](0),r.t0.response?(console.log(r.t0.response),s=r.t0.response.data.message,e.errors.push({errorMessage:e.$i18n.t(s)})):e.errors.push({errorMessage:e.$i18n.t("Error")});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},login:function(){var e=this;this.$refs.form.validate()&&(this.clearErrors(),this.$store.dispatch("auth/signIn",this.credentials).then((function(r){e.$router.push(e.$route.query.redirectFrom||{name:"home"}),e.clearCredentials()})).catch((function(r){if(r.response){if(console.log(r.response),"undefined"!==typeof r.response.data&&"undefined"!==typeof r.response.data.message)var t=r.response.data.message;else t=r.response.data;"invalid_user"===t?(e.fieldErrors.email=!0,e.fieldErrors.password=!0):"invalid_password"===t?e.fieldErrors.password=!0:t.indexOf("email")>-1&&(e.fieldErrors.email=!0);var s=!1;"email_not_verified"===t&&(s=!0),e.errors.push({errorMessage:e.$i18n.t(t),verifyLink:s})}else e.errors.push({errorMessage:e.$i18n.t("authentication_failed")})})))},clearErrors:function(){this.errors=[],this.fieldErrors.email=!1,this.fieldErrors.password=!1,this.resentVerification=!1},clearCredentials:function(){this.credentials={}}}},d=c,u=(t("546c"),t("2877")),p=t("6544"),f=t.n(p),m=t("0798"),v=t("8336"),h=t("99d9"),_=t("4bd4"),g=t("2fa4"),w=t("8654"),$=Object(u["a"])(d,s,i,!1,null,"c9f47e42",null);r["default"]=$.exports;f()($,{VAlert:m["a"],VBtn:v["a"],VCardActions:h["a"],VCardText:h["b"],VForm:_["a"],VSpacer:g["a"],VTextField:w["a"]})},"546c":function(e,r,t){"use strict";t("1cc3")}}]);