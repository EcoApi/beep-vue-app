(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f3b90ef"],{3133:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("Layout",{attrs:{title:e.$t("password_recovery_reset_password")}},[s("v-form",{ref:"form",staticStyle:{width:"100%"},on:{submit:function(r){return r.preventDefault(),e.resetPassword(r)}},model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[e.passwordReset?s("div",[0===e.errors.length?s("v-card-text",[s("v-alert",{attrs:{text:"",prominent:"",dense:"",color:"green"}},[e._v(" "+e._s(e.$t("password_recovery_reset_success"))+" ")]),s("a",{on:{click:e.login}},[e._v(e._s(e.$t("go_to_dashboard")))])],1):e._e(),e.errors.length>0?s("v-card-text",[e._l(e.errors,(function(r){return s("v-alert",{key:r.name,attrs:{type:"error",text:"",prominent:"",dense:"",color:"red"}},[e._v(" "+e._s(r.errorMessage)+" "),r.verifyLink?s("a",{staticClass:"red--text alert-link",on:{click:e.sendEmailVerification}},[e._v(e._s(e.$t("email_new_verification")))]):e._e()])})),s("router-link",{attrs:{to:{name:"sign-up"}}},[e._v(" "+e._s(e.$t("create_login_question"))+" ")])],2):e._e()],1):e._e(),e.passwordReset?e._e():s("div",[s("v-card-text",[e._l(e.errors,(function(r){return s("v-alert",{key:r.name,attrs:{type:"error",text:"",prominent:"",dense:"",color:"red"}},[e._v(" "+e._s(r.errorMessage)+" ")])})),s("v-text-field",{class:e.fieldErrors.email?"error--text":"",attrs:{label:""+e.$t("email"),rules:e.emailRules,type:"email",disabled:""},model:{value:e.resetPasswordRequest.email,callback:function(r){e.$set(e.resetPasswordRequest,"email",r)},expression:"resetPasswordRequest.email"}}),s("v-text-field",{class:e.fieldErrors.token?"error--text":"",attrs:{label:""+e.$t("verification_code"),rules:e.verificationCodeRules,autocomplete:"off"},model:{value:e.resetPasswordRequest.token,callback:function(r){e.$set(e.resetPasswordRequest,"token",r)},expression:"resetPasswordRequest.token"}}),s("v-text-field",{class:e.fieldErrors.password?"error--text":"",attrs:{label:""+e.$t("new_password"),rules:e.passwordRules,autocomplete:"off","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password"},on:{"click:append":function(r){e.show1=!e.show1}},model:{value:e.resetPasswordRequest.password,callback:function(r){e.$set(e.resetPasswordRequest,"password",r)},expression:"resetPasswordRequest.password"}}),s("v-text-field",{attrs:{label:""+e.$t("confirm_new_password"),rules:e.repeatPasswordRules,autocomplete:"off","append-icon":e.show2?"mdi-eye":"mdi-eye-off",type:e.show2?"text":"password"},on:{"click:append":function(r){e.show2=!e.show2}},model:{value:e.resetPasswordRequest.password_confirmation,callback:function(r){e.$set(e.resetPasswordRequest,"password_confirmation",r)},expression:"resetPasswordRequest.password_confirmation"}})],2),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:!e.valid,text:"",type:"submit"}},[e._v(" "+e._s(e.$t("password_recovery_reset_password"))+" ")])],1),s("v-divider",{staticClass:"mx-3"}),s("v-card-text",[s("router-link",{attrs:{to:{name:"password-forgot",query:{email:e.email}}}},[e._v(" "+e._s(e.$t("password_recovery_code_not_received"))+" ")]),s("v-spacer")],1)],1)])],1)},o=[],a=(s("c975"),s("96cf"),s("1da1")),n=s("3a75"),i=s("4d05"),d={components:{Layout:i["a"]},props:{email:{type:String,default:""},code:{type:String,default:""}},data:function(){return{resetPasswordRequest:{email:this.email||"",token:this.code||"",password:"",password_confirmation:""},valid:!1,errors:[],show1:!1,show2:!1,passwordReset:!1,fieldErrors:{email:!1,password:!1,token:!1}}},computed:{emailRules:function(){var e=this;return[function(r){return!!r||e.$i18n.t("email_is_required")},function(r){return/.+@.+\..+/.test(r)||e.$i18n.t("no_valid_email")}]},verificationCodeRules:function(){var e=this;return[function(r){return!!r||e.$i18n.t("the_field")+' "'+e.$i18n.t("verification_code")+'" '+e.$i18n.t("is_required")}]},passwordRules:function(){var e=this;return[function(r){return!!r||e.$i18n.t("password_is_required")},function(r){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\^$*.[\]{}()?\-"!@#%&/\\,><':;|_~`])(?=.{8,98})/.test(r)||e.$i18n.t("invalid_password")}]},repeatPasswordRules:function(){var e=this;return[function(r){return!!r||e.$i18n.t("the_field")+' "'+e.$i18n.t("confirm_new_password")+'" '+e.$i18n.t("is_required")},function(r){return r===e.resetPasswordRequest.password||e.$i18n.t("no_password_match")}]}},methods:{resetPassword:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,t,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.$refs.form.validate()){r.next=13;break}return e.clearErrors(),r.prev=2,r.next=5,n["a"].postRequest("/user/reset",e.resetPasswordRequest);case 5:return s=r.sent,null!==s.data.data.api_token&&(e.passwordReset=!0),r.abrupt("return",s);case 10:r.prev=10,r.t0=r["catch"](2),r.t0.response?(console.log(r.t0.response),t="undefined"!==typeof r.t0.response.data.message?r.t0.response.data.message:r.t0.response.data,"invalid_user"===t?(e.fieldErrors.email=!0,e.fieldErrors.password=!0):"invalid_password"===t?e.fieldErrors.password=!0:"invalid_token"===t&&(e.fieldErrors.token=!0),o=!1,"email_not_verified"===t&&(o=!0),e.errors.push({errorMessage:e.$i18n.t(t),verifyLink:o})):e.errors.push({errorMessage:e.$i18n.t("Error")});case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},sendEmailVerification:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n["a"].postRequest("/email/resend",{email:e.email});case 3:return s=r.sent,r.abrupt("return",s);case 7:r.prev=7,r.t0=r["catch"](0),r.t0.response?(console.log(r.t0.response),t=r.t0.response.data.message,e.errors.push({errorMessage:e.$i18n.t(t)})):e.errors.push({errorMessage:e.$i18n.t("Error")});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},login:function(){var e=this;this.clearErrors(),this.$store.dispatch("auth/signIn",{email:this.resetPasswordRequest.email,password:this.resetPasswordRequest.password}).then((function(r){e.$router.push({name:"home"}),e.clearResetPasswordRequest()})).catch((function(r){if(e.tryingToLogIn=!1,r.response){if(console.log(r.response),"undefined"!==typeof r.response.data.message)var s=r.response.data.message;else s=r.response.data;"invalid_user"===s?(e.fieldErrors.email=!0,e.fieldErrors.password=!0):"invalid_password"===s?e.fieldErrors.password=!0:s.indexOf("email")>-1&&(e.fieldErrors.email=!0);var t=!1;"email_not_verified"===s&&(t=!0),e.errors.push({errorMessage:e.$i18n.t(s),verifyLink:t})}else e.errors.push({errorMessage:e.$i18n.t("authentication_failed")})}))},clearErrors:function(){this.errors=[],this.fieldErrors.email=!1,this.fieldErrors.password=!1,this.fieldErrors.token=!1},clearResetPasswordRequest:function(){this.resetPasswordRequest={}}}},l=d,u=(s("3335"),s("2877")),c=s("6544"),p=s.n(c),f=s("0798"),w=s("8336"),v=s("99d9"),m=s("ce7e"),_=s("4bd4"),h=s("2fa4"),R=s("8654"),$=Object(u["a"])(l,t,o,!1,null,"53fee392",null);r["default"]=$.exports;p()($,{VAlert:f["a"],VBtn:w["a"],VCardActions:v["a"],VCardText:v["b"],VDivider:m["a"],VForm:_["a"],VSpacer:h["a"],VTextField:R["a"]})},3335:function(e,r,s){"use strict";s("e6c0")},e6c0:function(e,r,s){}}]);