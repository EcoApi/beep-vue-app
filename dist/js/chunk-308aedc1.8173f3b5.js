(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-308aedc1"],{"0fd9":function(t,e,i){"use strict";i("4b85");var a=i("2b0e"),s=i("d9f7"),n=i("80d2");const l=["sm","md","lg","xl"],r=["start","end","center"];function o(t,e){return l.reduce((i,a)=>(i[t+Object(n["A"])(a)]=e(),i),{})}const c=t=>[...r,"baseline","stretch"].includes(t),u=o("align",()=>({type:String,default:null,validator:c})),d=t=>[...r,"space-between","space-around"].includes(t),h=o("justify",()=>({type:String,default:null,validator:d})),p=t=>[...r,"space-between","space-around","stretch"].includes(t),f=o("alignContent",()=>({type:String,default:null,validator:p})),v={align:Object.keys(u),justify:Object.keys(h),alignContent:Object.keys(f)},m={align:"align",justify:"justify",alignContent:"align-content"};function g(t,e,i){let a=m[t];if(null!=i){if(e){const i=e.replace(t,"");a+="-"+i}return a+="-"+i,a.toLowerCase()}}const b=new Map;e["a"]=a["default"].extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:d},...h,alignContent:{type:String,default:null,validator:p},...f},render(t,{props:e,data:i,children:a}){let n="";for(const s in e)n+=String(e[s]);let l=b.get(n);if(!l){let t;for(t in l=[],v)v[t].forEach(i=>{const a=e[i],s=g(t,i,a);s&&l.push(s)});l.push({"no-gutters":e.noGutters,"row--dense":e.dense,["align-"+e.align]:e.align,["justify-"+e.justify]:e.justify,["align-content-"+e.alignContent]:e.alignContent}),b.set(n,l)}return t(e.tag,Object(s["a"])(i,{staticClass:"row",class:l}),a)}})},"1f4f":function(t,e,i){"use strict";i("8b37");var a=i("80d2"),s=i("7560"),n=i("58df");e["a"]=Object(n["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},5311:function(t,e,i){"use strict";var a=i("5607"),s=i("2b0e");e["a"]=s["default"].extend({name:"rippleable",directives:{ripple:a["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},"62ad":function(t,e,i){"use strict";i("4b85");var a=i("2b0e"),s=i("d9f7"),n=i("80d2");const l=["sm","md","lg","xl"],r=(()=>l.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}))(),o=(()=>l.reduce((t,e)=>(t["offset"+Object(n["A"])(e)]={type:[String,Number],default:null},t),{}))(),c=(()=>l.reduce((t,e)=>(t["order"+Object(n["A"])(e)]={type:[String,Number],default:null},t),{}))(),u={col:Object.keys(r),offset:Object.keys(o),order:Object.keys(c)};function d(t,e,i){let a=t;if(null!=i&&!1!==i){if(e){const i=e.replace(t,"");a+="-"+i}return"col"!==t||""!==i&&!0!==i?(a+="-"+i,a.toLowerCase()):a.toLowerCase()}}const h=new Map;e["a"]=a["default"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...o,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:i,children:a,parent:n}){let l="";for(const s in e)l+=String(e[s]);let r=h.get(l);if(!r){let t;for(t in r=[],u)u[t].forEach(i=>{const a=e[i],s=d(t,i,a);s&&r.push(s)});const i=r.some(t=>t.startsWith("col-"));r.push({col:!i||!e.cols,["col-"+e.cols]:e.cols,["offset-"+e.offset]:e.offset,["order-"+e.order]:e.order,["align-self-"+e.alignSelf]:e.alignSelf}),h.set(l,r)}return t(e.tag,Object(s["a"])(i,{class:r}),a)}})},8547:function(t,e,i){"use strict";var a=i("2b0e"),s=i("80d2");e["a"]=a["default"].extend({name:"comparable",props:{valueComparator:{type:Function,default:s["i"]}}})},"8b37":function(t,e,i){},"9d01":function(t,e,i){},"9dd9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{attrs:{title:this.$i18n.t("alertrule_pagetitle")}},[t.ready?a("div",{staticClass:"filter-bar-wrapper"},[a("v-container",{staticClass:"filter-container"},[a("v-row",{staticClass:"filter-bar d-flex align-center"},[a("v-card-actions",{class:(t.showAlertRulePlaceholder?"save-button-mobile-wide":"mr-1")+" d-flex "+(t.mobile?"justify-end":"justify-space-between")+" align-center",staticStyle:{width:"100%"}},[t.showAlertRulePlaceholder?t._e():a("div",{staticClass:"d-flex justify-start align-center"},[a("v-switch",{staticClass:"pt-0",attrs:{label:t.alertsEnabled?t.$t("alerts_enabled"):t.$t("alerts_disabled"),"hide-details":""},on:{change:t.toggleAlerts},model:{value:t.alertsEnabled,callback:function(e){t.alertsEnabled=e},expression:"alertsEnabled"}}),a("v-icon",{staticClass:"mdi mdi-information icon-info cursor-pointer ml-2",attrs:{dark:"",small:"",color:t.showExplanation?"accent":"grey"},on:{click:function(e){t.showExplanation=!t.showExplanation}}})],1),t.showAlertRulePlaceholder||!t.mobile?a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"save-button-mobile-wide",attrs:{tile:"",outlined:"",color:"black"}},"v-btn",s,!1),i),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" "+t._s(t.$t("Add_alertrule"))+" ")],1)]}}],null,!1,1466780842)},[a("v-list",t._l(t.buttonMenuItems,(function(e,i){return a("v-list-item",{key:i,attrs:{to:e.route?{name:e.route}:null}},[a("v-list-item-icon",{staticClass:"mr-3"},[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1):t._e()],1)],1)],1)],1):t._e(),t.ready&&t.showAlertRulePlaceholder?a("v-container",{staticClass:"mb-n12 mt-12"},[a("v-row",[a("v-col",[a("div",{staticClass:"text-center"},[a("img",{staticStyle:{"max-width":"180px"},attrs:{src:i("ac4b")}})])])],1)],1):t._e(),t.ready?t._e():a("v-container",[a("div",{staticClass:"loading"},[a("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}})],1)]),a("v-container",{staticClass:"alertrules-content"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[t.showExplanation&&t.ready?a("v-col",{staticClass:"d-flex justify-start align-start",attrs:{cols:"12",xl:"9"}},[a("p",{class:"beep-label mb-2 "+(t.mobile?"mb-n2":"mt-n6")},[a("em",[t._v(t._s(t.$t("alert_explanation_1")+" "+t.$t("alert_explanation_2")))])])]):t._e(),t.mobile?a("v-col",{staticClass:"d-flex justify-end align-end mb-3",attrs:{cols:"12",xl:"3"}},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"save-button-mobile-wide",attrs:{tile:"",outlined:"",color:"accent"}},"v-btn",s,!1),i),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" "+t._s(t.$t("Add_alertrule"))+" ")],1)]}}],null,!1,1171492787)},[a("v-list",t._l(t.buttonMenuItems,(function(e,i){return a("v-list-item",{key:i,attrs:{to:e.route?{name:e.route}:null}},[a("v-list-item-icon",{staticClass:"mr-3"},[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1)],1):t._e()],1),t.showAlertRulePlaceholder?t._e():a("div",{staticClass:"rounded-border"},[a("v-simple-table",{staticClass:"v-data-table--smallfont",scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("Active"))+" ")]),a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("Alert_via_email"))+" ")]),a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("Name"))+" ")]),a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("Description"))+" ")]),a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("Actions"))+" ")]),a("th")])]),a("tbody",t._l(t.sortedAlertRules,(function(e,i){return a("tr",{key:i},[a("td",[t.showLoadingIconById.active.indexOf(e.id)>-1?a("v-progress-circular",{staticClass:"progress-icon",attrs:{size:"18",width:"2",color:e.active?"red":"green",indeterminate:""}}):t._e(),-1===t.showLoadingIconById.active.indexOf(e.id)?a("v-icon",{attrs:{dark:"",color:e.active?"green":"red"},on:{click:function(i){return t.toggleAlertRule(e,"active")}}},[t._v(t._s(e.active?"mdi-check":"mdi-close"))]):t._e()],1),a("td",{class:e.active?"":"td--not-active"},[t.showLoadingIconById.alert_via_email.indexOf(e.id)>-1?a("v-progress-circular",{staticClass:"progress-icon",attrs:{size:"18",width:"2",color:e.alert_via_email?"red":"green",indeterminate:""}}):t._e(),-1===t.showLoadingIconById.alert_via_email.indexOf(e.id)?a("v-icon",{attrs:{dark:"",color:e.alert_via_email?"green":"red"},on:{click:function(i){return t.toggleAlertRule(e,"alert_via_email")}}},[t._v(t._s(e.alert_via_email?"mdi-check":"mdi-close"))]):t._e()],1),a("td",{class:e.active?"":"td--not-active"},[a("span",{domProps:{textContent:t._s(e.name)}})]),a("td",{class:e.active?"":"td--not-active"},[a("span",{domProps:{textContent:t._s(e.description)}})]),a("td",{class:e.active?"":"td--not-active"},[a("router-link",{attrs:{to:{name:"alertrule-edit",params:{id:e.id}}}},[a("v-icon",{attrs:{dark:"",color:"accent"}},[t._v("mdi-pencil")])],1)],1),a("td",{class:e.active?"":"td--not-active"},[a("v-icon",{attrs:{dark:"",color:"red"},on:{click:function(a){return t.confirmDeleteAlertRule(e,i)}}},[t._v("mdi-delete")])],1)])})),0)]},proxy:!0}],null,!1,1632610994)})],1)],1)],1)],1),a("Confirm",{ref:"confirm"})],1)},s=[],n=(i("a4d3"),i("e01a"),i("4de4"),i("c975"),i("d81d"),i("fb6a"),i("a434"),i("b0c0"),i("96cf"),i("1da1")),l=i("5530"),r=i("3a75"),o=i("795d"),c=i("d0dc"),u=i("2f62"),d=i("9d77"),h={components:{Confirm:o["a"],Layout:c["a"]},mixins:[d["c"]],data:function(){return{ready:!1,errors:[],showExplanation:!1,showLoadingIconById:{active:[],alert_via_email:[]}}},computed:Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(u["b"])("alerts",["alertRules"])),Object(u["b"])("locations",["apiaries"])),Object(u["b"])("groups",["groups"])),{},{alertsEnabled:{get:function(){return this.alertRules.length>0&&this.alertRules.filter((function(t){return 1===t.active})).length>0},set:function(t){return null}},buttonMenuItems:function(){return[{icon:"mdi-plus",title:this.$i18n.t("New_alertrule"),route:"alertrule-create"},{icon:"mdi-content-copy",title:this.$i18n.t("Select_default_alertrule"),route:"alertrules-default"}]},mobile:function(){return this.$vuetify.breakpoint.mobile},showAlertRulePlaceholder:function(){return 0===this.alertRules.length},sortedAlertRules:function(){var t=this.alertRules.slice().sort((function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:e.name.toLowerCase()>t.name.toLowerCase()?-1:0}));return t}}),created:function(){var t=this;0===this.alertRules.length?this.readAlertRules().then((function(){0===t.alertRules.length&&(t.showExplanation=!0),t.ready=!0})):this.ready=!0},methods:{deleteAlertRule:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log("Deleting alert rule ",t),i.prev=1,i.next=4,r["a"].deleteRequest("/alert-rules/",t);case 4:a=i.sent,a||console.log("Error"),e.readAlertRules(),i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](1),i.t0.response?console.log("Error: ",i.t0.response):console.log("Error: ",i.t0);case 12:case"end":return i.stop()}}),i,null,[[1,9]])})))()},toggleAlertRule:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i.showLoadingIconById[e].push(t.id),s=Object(l["a"])({},t),s[e]=!s[e],a.prev=3,a.next=6,r["a"].updateRequest("/alert-rules/",t.id,s);case 6:n=a.sent,n&&i.readAlertRules().then((function(){i.showLoadingIconById[e].splice(i.showLoadingIconById[e].indexOf(t.id),1)})),a.next=15;break;case 10:a.prev=10,a.t0=a["catch"](3),t[e]=!t[e],i.showLoadingIconById[e].splice(i.showLoadingIconById[e].indexOf(t.id),1),a.t0.response?console.log("Error: ",a.t0.response):console.log("Error: ",a.t0);case 15:case"end":return a.stop()}}),a,null,[[3,10]])})))()},confirmDeleteAlertRule:function(t,e){var i=this;this.$refs.confirm.open(this.$i18n.t("delete_alertrule"),this.$i18n.t("delete_alertrule")+" ("+t.name+" - "+t.description+")?",{color:"red"}).then((function(e){i.deleteAlertRule(t.id)})).catch((function(t){return!0}))},toggleAlerts:function(){var t=this;this.alertsEnabled?this.alertRules.map((function(e){e.active&&t.toggleAlertRule(e,"active")})):this.alertRules.map((function(e){e.active||t.toggleAlertRule(e,"active")}))}}},p=h,f=(i("d583"),i("2877")),v=i("6544"),m=i.n(v),g=i("8336"),b=i("99d9"),_=i("62ad"),y=i("a523"),w=i("132d"),C=i("8860"),x=i("da13"),S=i("5d23"),k=i("34c3"),A=i("e449"),j=i("490a"),R=i("0fd9"),V=i("1f4f"),$=i("b73d"),I=Object(f["a"])(p,a,s,!1,null,"e81ef094",null);e["default"]=I.exports;m()(I,{VBtn:g["a"],VCardActions:b["a"],VCol:_["a"],VContainer:y["a"],VIcon:w["a"],VList:C["a"],VListItem:x["a"],VListItemContent:S["a"],VListItemIcon:k["a"],VListItemTitle:S["c"],VMenu:A["a"],VProgressCircular:j["a"],VRow:R["a"],VSimpleTable:V["a"],VSwitch:$["a"]})},ac4b:function(t,e,i){t.exports=i.p+"img/BEEP-alert-rule.49582641.png"},b73d:function(t,e,i){"use strict";i("ec29"),i("9d01");var a=i("fe09"),s=i("c37a"),n=i("c3f0"),l=i("0789"),r=i("490a"),o=i("80d2");e["a"]=a["a"].extend({name:"v-switch",directives:{Touch:n["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...this.attrs$}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(l["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(r["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===o["t"].left&&this.isActive||t.keyCode===o["t"].right&&!this.isActive)&&this.onChange()}}})},d583:function(t,e,i){"use strict";i("f7f7")},ec29:function(t,e,i){},f7f7:function(t,e,i){},fe09:function(t,e,i){"use strict";i.d(e,"b",(function(){return r}));var a=i("c37a"),s=i("5311"),n=i("8547"),l=i("58df");function r(t){t.preventDefault()}e["a"]=Object(l["a"])(a["a"],s["a"],n["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=a["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:r},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:r},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}})}}]);